(()=>{"use strict";const e=e=>{function t(e){let t="+7 (___) ___-__-__",c=0,r=t.replace(/\D/g,""),o=this.value.replace(/\D/g,"");r.length>=o.length&&(o=r),this.value=t.replace(/./g,(function(e){return/[_\d]/.test(e)&&c<o.length?o.charAt(c++):c>=o.length?"":e})),"blur"===e.type?2==this.value.length&&(this.value=""):((e,t)=>{if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let c=t.createTextRange();c.collapse(!0),c.moveEnd("character",e),c.moveStart("character",e),c.select()}})(this.value.length,this)}document.querySelectorAll(e).forEach((e=>{e.addEventListener("input",t),e.addEventListener("focus",t),e.addEventListener("blur",t)}))},t=()=>{try{const e=document.querySelectorAll('[href^="#"]'),t=.15,c=e=>{let c=document.documentElement.scrollTop,r=document.querySelector(e).getBoundingClientRect().top-50,o=null;requestAnimationFrame((function e(a){null===o&&(o=a);let n=a-o,s=r<0?Math.max(c-n/t,c+r):Math.min(c+n/t,c+r);document.documentElement.scrollTo(0,s),s!=c+r&&requestAnimationFrame(e)}))};window.location.hash&&c(window.location.hash),e.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),c(this.hash)}))}))}catch(e){console.log(e.stack)}},c=()=>{try{const e=document.querySelector(".profile__settings-avatar");if(e){const t=e.querySelector("input"),c=e.querySelector(".avatar-wrap img");t.addEventListener("change",(function(){if(this.files[0]){const e=new FileReader;e.addEventListener("load",(function(){c.src=e.result}),!1),e.readAsDataURL(this.files[0])}}))}}catch(e){console.log(e.stack)}try{document.querySelectorAll(".checkbox-field").forEach((e=>{const t=e.querySelectorAll(".checkbox-field-item");t.forEach((c=>{c.querySelector("input").addEventListener("change",(()=>{e.classList.contains("radio")&&t.forEach((e=>{c!=e&&(e.classList.remove("active"),e.querySelector("input").checked=!1)})),c.classList.toggle("active")}))}))}))}catch(e){console.log(e.stack)}try{const e=document.querySelectorAll("form.form, form.form-ajax"),t=document.querySelector(".modal"),c=document.querySelector(".modal__success"),r=document.querySelectorAll(".modal__item"),o=document.querySelector(".modal__auth-error");e.forEach((e=>{const a=e.querySelector(".btn");let n=e.getAttribute("data-success")?document.querySelector(".modal__success-"+e.getAttribute("data-success").trim()):"";e.addEventListener("submit",(s=>{s.preventDefault(),a.classList.add("disable");const l=new FormData(e);(async function(e,t){let c=await fetch(e,{method:"POST",body:t});return await c.text()})(e.action,l).then((e=>{a.classList.remove("disable"),t.classList.add("active"),r.forEach((e=>e.classList.remove("active"))),"auth-error"==e?o.classList.add("active"):"restart"==e?window.location.reload():n?n.classList.add("active"):c.classList.add("active"),document.querySelector("body").classList.add("fixed"),document.querySelector("html").classList.add("fixed")}))}))}))}catch(e){console.log(e.stack)}};window.addEventListener("DOMContentLoaded",(()=>{e('input[type="tel"]'),t(),(()=>{try{document.querySelectorAll(".slider").forEach((e=>{let t,c=e.querySelector(".slider-track"),r=e.querySelector(".slider-list"),o=e.querySelector(".slider-dots"),a=e.querySelectorAll(".slider-toggle"),n=e.querySelectorAll(".slide"),s=0,l=e.querySelector(".right"),i=l?l.querySelector(".counter"):"",d=e.querySelector(".left"),u=d?d.querySelector(".counter"):"",m=0,h=n.length,v=0,g=0,y=!1,L=0,f=0;if(o){o.innerHTML="";for(let e=0;e<h;e++)o.innerHTML+="<span></span>";t=o.querySelectorAll("span")}const S=()=>window.innerWidth<=576&&e.getAttribute("data-mob-vis")?+e.getAttribute("data-mob-vis"):window.innerWidth<=768&&e.getAttribute("data-stablet-vis")?+e.getAttribute("data-stablet-vis"):window.innerWidth<=992&&e.getAttribute("data-tablet-vis")?+e.getAttribute("data-tablet-vis"):window.innerWidth<=1400&&e.getAttribute("data-lap-vis")?+e.getAttribute("data-lap-vis"):window.innerWidth<2100&&e.getAttribute("data-pc-vis")?+e.getAttribute("data-pc-vis"):e.getAttribute("data-tv-vis")?+e.getAttribute("data-tv-vis"):1,p=()=>{v=-m*s,c.style.transform=`translateX(-${m*s}px)`,n.forEach((e=>e.classList.remove("active"))),n[m].classList.add("active"),i&&u&&(u.textContent=`${0===m?h:m}/${h}`,i.textContent=`${m+2>h?1:m+2}/${h}`),o&&(t.forEach((e=>e.classList.remove("active"))),t[m].classList.add("active"))},q=()=>{s=n[0].offsetWidth+ +window.getComputedStyle(n[0]).marginRight.replace("px","")},E=()=>-s*(h-S()),b=(e=150)=>{if(y){c.classList.remove("fast"),r.classList.remove("grabbing"),y=!1,v=g;let t=-Math.ceil(f/s);0===t&&(f<-e&&(t=1),f>e&&(t=-1)),m+=t,m<0&&(m=0),m+S()>=h&&(m=h-S()),p(),f=0,L=0}},w=e=>{y=!0,L=e},A=e=>{y&&(c.classList.add("fast"),r.classList.add("grabbing"),f=e-L,g=v+(e-L),g>0&&(g=0),g<E()&&(g=E()),c.style.transform=`translateX(${g}px)`)};n.forEach(((e,t)=>{e.classList.contains("active")&&(m=t+S()>=h?h-S():t)})),q(),p(),r.addEventListener("mousedown",(e=>w(e.clientX))),r.addEventListener("mousemove",(e=>A(e.clientX))),r.addEventListener("mouseup",(()=>b(150))),r.addEventListener("mouseleave",(()=>b(150))),r.addEventListener("touchstart",(e=>w(e.touches[0].clientX))),r.addEventListener("touchmove",(e=>A(e.touches[0].clientX))),r.addEventListener("touchend",(()=>b(50))),l&&l.addEventListener("click",(()=>{m+S()>=h?m=0:m++,p()})),d&&d.addEventListener("click",(()=>{m<=0?m=h-S():m--,p()})),o&&t.forEach(((e,t)=>{e.addEventListener("click",(()=>{m=t,p()}))})),a&&a.forEach((e=>{e.querySelectorAll("span").forEach(((e,t)=>{e.addEventListener("click",(()=>{m=t,p()}))}))})),window.addEventListener("resize",(()=>{q(),p()}))}))}catch(e){console.log(e.stack)}})(),(()=>{try{document.querySelectorAll(".single-catalog__left").forEach((e=>{let t=e.querySelector(".single-catalog__slider-track"),c=e.querySelector(".single-catalog__slider-list"),r=t.querySelectorAll("img"),o=e.querySelectorAll(".single-catalog__big img"),a=e.querySelector(".arrow-next"),n=e.querySelector(".arrow-prev"),s=0,l=0,i=0,d=r.length;const u=()=>{r.forEach((e=>e.classList.remove("active"))),r[i].classList.add("active"),o.forEach((e=>e.classList.remove("active"))),o[i].classList.add("active"),window.innerWidth<=768?t.style.transform=`translateX(-${i*s}px)`:t.style.transform=`translateY(-${i*l}px)`},m=()=>{i+1>=d?i=0:i++,u()},h=()=>{i<=0?i=d-1:i--,u()},v=()=>{s=r[0].offsetWidth+ +window.getComputedStyle(r[0]).marginRight.replace("px",""),l=r[0].offsetHeight+ +window.getComputedStyle(r[0]).marginBottom.replace("px","")};t.style.transition="transform 0.5s ease 0s",v();let g=0;c.addEventListener("touchstart",(e=>{window.innerWidth<=768&&(g=e.changedTouches[0].screenX)})),c.addEventListener("touchend",(e=>{window.innerWidth<=768&&(g-e.changedTouches[0].screenX>50?m():g-e.changedTouches[0].screenX<-50&&h())})),a&&a.addEventListener("click",m),n&&n.addEventListener("click",h),r.forEach(((e,t)=>{e.addEventListener("click",(()=>{i=t,u()}))})),window.addEventListener("resize",(()=>{v(),u()}))}))}catch(e){console.log(e.stack)}})(),c(),(()=>{try{const e=document.querySelectorAll(".filter-range-line input"),t=document.querySelectorAll(".filter-price .from-text, .filter-price .to-text"),c=document.querySelector(".filter-range-line .line");let r=0;const o=o=>{let a=+e[0].value,n=+e[1].value;n-a<r?"range-from"===o.target.className?e[0].value=n-r:e[1].value=a+r:(t[0].textContent=a,t[1].textContent=n,c.style.left=a/e[0].max*100+"%",c.style.right=100-n/e[1].max*100+"%")};o(),e.forEach((e=>{e.addEventListener("input",o)}))}catch(e){console.log(e.stack)}try{const e=document.querySelector(".catalog__list"),t=document.querySelector(".catalog__more"),c=document.querySelector(".catalog__rating");if(e&&t){let r=e.querySelectorAll(".catalog__list-item"),o=e.innerHTML,a=e.classList.contains("four")?window.innerWidth>576&&window.innerWidth<=1200?9:8:window.innerWidth<=576?8:9,n=0,s=r.length;const l=()=>{for(let e=n;e<s&&!(e>=n+a);e++)r[e]&&r[e].classList.remove("hide");n+=a,n>=s&&(t.style.display="none")};if(l(),t.addEventListener("click",l),c){const t=c.querySelector(".catalog__rating-name"),a=t.querySelector("span"),s=c.querySelector(".catalog__rating-list"),i=s.querySelectorAll("span"),d=(c="По умолчанию",i="default")=>{if(t.classList.remove("active"),s.classList.remove("active"),a.textContent=c,e.innerHTML="","default"!=i){let t=Array.from(r);"price-up"==i&&t.sort(((e,t)=>+e.getAttribute("data-price")-+t.getAttribute("data-price"))),"price-down"==i&&t.sort(((e,t)=>+t.getAttribute("data-price")-+e.getAttribute("data-price"))),"rating"==i&&t.sort(((e,t)=>+t.getAttribute("data-rating")-+e.getAttribute("data-rating"))),t.forEach((t=>{t.classList.add("hide"),e.innerHTML+=t.outerHTML}))}"default"==i&&(e.innerHTML=o),n=0,r=e.querySelectorAll(".catalog__list-item"),l()};i.forEach((e=>{e.addEventListener("click",(()=>{d(e.textContent.trim(),e.getAttribute("data-sort").trim())}))}))}}}catch(e){console.log(e.stack)}})(),(()=>{const e=e=>{let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},t=(e,t,c={})=>{(c={path:"/",...c}).expires instanceof Date&&(c.expires=c.expires.toUTCString());let r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in c){r+="; "+e;let t=c[e];!0!==t&&(r+="="+t)}document.cookie=r};try{const e=document.querySelector(".cart__content-side .btn"),c=document.querySelector(".cart__form"),r=document.querySelector(".cart__list"),o=document.querySelector(".modal"),a=document.querySelector(".modal__success"),n=document.querySelectorAll(".modal__item");c.addEventListener("submit",(e=>{e.preventDefault()})),e.addEventListener("click",(()=>{if(r.classList.contains("hide")){e.classList.add("disable");const r=new FormData(c);(async function(e,t){let c=await fetch(e,{method:"POST",body:t});return await c.text()})(c.action,r).then((c=>{e.classList.remove("disable"),o.classList.add("active"),n.forEach((e=>e.classList.remove("active"))),a.classList.add("active"),document.querySelector("body").classList.add("fixed"),document.querySelector("html").classList.add("fixed"),setTimeout((()=>{t("cart","",{"max-age":-1}),window.location.reload()}),2e3)}))}c.classList.remove("hide"),r.classList.add("hide")}))}catch(e){console.log(e.stack)}try{const e=document.querySelectorAll(".cart__list-row.cart-add-parent"),t=document.querySelector(".pre-price"),c=document.querySelector(".cut-price"),r=document.querySelector(".end-price"),o=document.querySelector('input[name="order-price"]'),a=document.querySelector('input[name="order-personal"]'),n=document.querySelector(".over-price-item").querySelector(".over-price"),s=document.querySelectorAll(".cart__top-cut-list > span"),l=()=>{setTimeout((()=>{let l=0,i=0,d=0;e.forEach((e=>{let t=+e.querySelector(".counter .counter-result").textContent.trim(),c=+e.getAttribute("data-price")*t,r=+e.getAttribute("data-cut")*t;e.querySelector(".price-result-span").textContent=r,l+=c,i+=r})),d=i,s.forEach((e=>{let t=e.getAttribute("data-dir"),c=+e.getAttribute("data-price"),r=+e.getAttribute("data-cut");("to"==t&&c>i||"from"==t&&c<=i)&&(s.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),n.textContent=r,a.value=r,d=Math.round(i-r*(i/100)))})),t.textContent=l,r.textContent=d,o.value=d,c&&(c.textContent=l-i)}),200)};l(),e.forEach((e=>{const t=e.querySelector(".counter .counter-minus"),c=e.querySelector(".counter .counter-plus"),r=e.querySelector(".counter .counter-input"),o=e.querySelectorAll(".counter .counter-list span");let a;t.addEventListener("click",l),c.addEventListener("click",l),o.forEach((e=>{e.addEventListener("click",l)})),r.addEventListener("input",(()=>{clearTimeout(a),a=setTimeout(l,200)}))}))}catch(e){console.log(e.stack)}try{const c=document.querySelectorAll(".cart-add-parent"),r=document.querySelectorAll(".header__cart");let o=e("cart")?JSON.parse(e("cart")):[];c.forEach((e=>{const c=e.querySelector(".cart-add"),a=e.querySelector(".cart-delete"),n=e.querySelector(".counter");let s=+e.getAttribute("data-id");const l=(c="")=>{let a=n?+n.querySelector(".counter-result").textContent.trim():1,l=[],i=0,d=!1;"delete"==c?(o.forEach((e=>{e[0]!=s&&(i+=e[1],l.push(e))})),e.remove()):"responsive"==c?o.forEach((e=>{e[0]==s&&(e[1]=a),i+=e[1],l.push(e)})):(o.forEach((e=>{e[0]==s&&(e[1]+=a,d=!0),i+=e[1],l.push(e)})),d||(l.push([s,a]),i+=a)),r.forEach((e=>{e.querySelector("span")?e.querySelector("span").textContent=i:e.innerHTML+="<span>"+i+"</span>",0==i&&e.querySelector("span").remove()})),t("cart",JSON.stringify(l),{"max-age":2678400})};if(n&&n.classList.contains("responsive")){let e;n.querySelector(".counter-input").addEventListener("input",(()=>{clearTimeout(e),e=setTimeout((()=>{l("responsive")}),200)})),n.querySelector(".counter-minus").addEventListener("click",(()=>{setTimeout((()=>{l("responsive")}),200)})),n.querySelector(".counter-plus").addEventListener("click",(()=>{setTimeout((()=>{l("responsive")}),200)})),n.querySelectorAll(".counter-list span").forEach((e=>{e.addEventListener("click",(()=>{setTimeout((()=>{l("responsive")}),200)}))}))}a&&a.addEventListener("click",(()=>l("delete"))),c&&c.addEventListener("click",l)}))}catch(e){console.log(e.stack)}try{const c=document.querySelectorAll(".wishlist-btn, .wish-delete"),r=document.querySelectorAll(".header__favorite");let o=e("favorite")?JSON.parse(e("favorite")):[];const a=e=>{let c=[],a=!1;o.forEach((t=>{t!=e?c.push(t):a=!0})),a||c.push(e),o=c,r.forEach((e=>{e.querySelector("span")?e.querySelector("span").textContent=o.length:e.innerHTML+="<span>"+o.length+"</span>",0==o.length&&e.querySelector("span").remove()})),t("favorite",JSON.stringify(c),{"max-age":2678400})};c.forEach((e=>{let t=+e.getAttribute("data-id").trim();-1==o.indexOf(t)||e.classList.contains("wish-delete")||e.classList.add("active"),e.addEventListener("click",(()=>{a(t),e.classList.contains("wish-delete")?e.closest(".wish-parent").remove():e.classList.toggle("active")}))}))}catch(e){console.log(e.stack)}})(),(()=>{try{const e=document.querySelectorAll(".body-click-content"),t=document.querySelectorAll(".body-click-target");document.body.addEventListener("click",(c=>{if(c.target.classList.contains("body-click-target")||c.target.classList.contains("body-click-close")){c.preventDefault();let r=c.target.getAttribute("data-content")?document.querySelector('.body-click-content[data-content="'+c.target.getAttribute("data-content")+'"]'):c.target.nextElementSibling?c.target.nextElementSibling:"";e.forEach((e=>r!=e&&e.classList.contains("global-hide")?e.classList.remove("active"):"")),t.forEach((e=>e.classList.contains("global-hide")&&e!=c.target?e.classList.remove("active"):"")),r&&r.classList.contains("body-click-content")?r.classList.toggle("active"):c.target.parentElement.classList.remove("active"),!c.target.classList.contains("not-active")&&c.target.classList.toggle("active")}else c.target.closest(".body-click-content")||(e.forEach((e=>e.classList.contains("not-global")?"":e.classList.remove("active"))),t.forEach((e=>e.classList.contains("not-active")||e.classList.contains("not-global")?"":e.classList.remove("active"))))}))}catch(c){console.log(c.stack)}try{const r=document.querySelectorAll(".elem_animate"),o=document.querySelectorAll(".text_animate");function a(e){e.forEach((e=>{(window.innerWidth<=600?window.innerHeight/1.05:window.innerHeight/1.2)+window.scrollY>=e.getBoundingClientRect().y+window.scrollY&&e.classList.add("anim")}))}o.forEach((e=>{let t=e.textContent.trim(),c="",r=0;for(let e=0;e<t.length;e++)c+=`<i class="or" style="transition: 0.4s all ${r.toFixed(2)}s">${t[e]}</i>`,r+=.03;e.innerHTML=c})),a(r),a(o),window.addEventListener("scroll",(()=>{a(r),a(o)}))}catch(n){console.log(n.stack)}try{const s=document.querySelector(".modal"),l=document.querySelectorAll("[data-call-modal]"),i=document.querySelectorAll(".modal__item");l.forEach((e=>{e.getAttribute("data-call-modal")&&e.addEventListener("click",(t=>{t.preventDefault(),i.forEach((e=>e.classList.remove("active"))),s.classList.add("active"),s.querySelector('.modal__item[data-modal="'+e.getAttribute("data-call-modal")+'"]').classList.add("active"),document.querySelector("body").classList.add("fixed"),document.querySelector("html").classList.add("fixed")}))})),s.addEventListener("click",(e=>{(e.target==s||e.target.classList.contains("modal__close")||e.target.classList.contains("modal__hide"))&&(i.forEach((e=>e.classList.remove("active"))),s.classList.remove("active"),document.querySelector("body").classList.remove("fixed"),document.querySelector("html").classList.remove("fixed"))}))}catch(d){console.log(d.stack)}try{const u=document.querySelector(".header__burger"),m=document.querySelector(".header__mobile");u.addEventListener("click",(()=>{u.classList.toggle("active"),m.classList.toggle("active"),document.querySelector("body").classList.toggle("fixed"),document.querySelector("html").classList.toggle("fixed")}))}catch(h){console.log(h.stack)}try{document.querySelectorAll(".counter").forEach((e=>{const t=e.querySelector(".counter-minus"),c=e.querySelector(".counter-plus"),r=e.querySelector(".counter-result"),o=e.querySelector(".counter-input"),a=e.querySelector(".counter-list"),n=a?a.querySelectorAll("span"):"";let s=+r.textContent;const l=(e=0,t=0)=>{s+=e,0!=t&&(s=t),s<1&&(s=1),r.textContent=s,o&&(o.value=s)};t.addEventListener("click",(()=>l(-1))),c.addEventListener("click",(()=>l(1))),o&&(o.addEventListener("click",(()=>{setTimeout((()=>{e.classList.add("active")}),200)})),o.addEventListener("blur",(()=>{e.classList.remove("active")})),o.addEventListener("input",(()=>{s=+o.value,s<1&&(s=1,o.value=1),r.textContent=s}))),a&&n.forEach((e=>{e.addEventListener("click",(()=>{l(0,+e.textContent.trim())}))}))}))}catch(v){console.log(v.stack)}try{document.querySelectorAll(".showhide-field").forEach((e=>{const t=e.querySelector(".showhide-list"),c=e.querySelector(".showhide-more");if(t&&c){const r=t.querySelectorAll(".showhide-item");let o=e.getAttribute("data-vis")?+e.getAttribute("data-vis").trim():5,a=0,n=r.length;const s=()=>{for(let e=a;e<n&&!(e>=a+o);e++)r[e].classList.remove("hide");a+=o,a>=n&&(c.style.display="none")};s(),c.addEventListener("click",s)}}))}catch(g){console.log(g.stack)}})()}))})();