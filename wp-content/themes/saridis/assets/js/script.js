(()=>{"use strict";const e=e=>{function t(e){let t="+7 (___) ___-__-__",c=0,r=t.replace(/\D/g,""),a=this.value.replace(/\D/g,"");r.length>=a.length&&(a=r),this.value=t.replace(/./g,(function(e){return/[_\d]/.test(e)&&c<a.length?a.charAt(c++):c>=a.length?"":e})),"blur"===e.type?2==this.value.length&&(this.value=""):((e,t)=>{if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let c=t.createTextRange();c.collapse(!0),c.moveEnd("character",e),c.moveStart("character",e),c.select()}})(this.value.length,this)}document.querySelectorAll(e).forEach((e=>{e.addEventListener("input",t),e.addEventListener("focus",t),e.addEventListener("blur",t)}))},t=()=>{try{const e=document.querySelectorAll('[href^="#"]'),t=.15,c=e=>{let c=document.documentElement.scrollTop,r=document.querySelector(e).getBoundingClientRect().top-50,a=null;requestAnimationFrame((function e(o){null===a&&(a=o);let s=o-a,l=r<0?Math.max(c-s/t,c+r):Math.min(c+s/t,c+r);document.documentElement.scrollTo(0,l),l!=c+r&&requestAnimationFrame(e)}))};window.location.hash&&c(window.location.hash),e.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),c(this.hash)}))}))}catch(e){console.log(e.stack)}},c=()=>{try{const e=document.querySelector(".profile__settings-avatar");if(e){const t=e.querySelector("input"),c=e.querySelector(".avatar-wrap img");t.addEventListener("change",(function(){if(this.files[0]){const e=new FileReader;e.addEventListener("load",(function(){c.src=e.result}),!1),e.readAsDataURL(this.files[0])}}))}}catch(e){console.log(e.stack)}try{document.querySelectorAll(".checkbox-field").forEach((e=>{const t=e.querySelectorAll(".checkbox-field-item");t.forEach((c=>{c.querySelector("input").addEventListener("change",(()=>{e.classList.contains("radio")&&t.forEach((e=>{c!=e&&(e.classList.remove("active"),e.querySelector("input").checked=!1)})),c.classList.toggle("active")}))}))}))}catch(e){console.log(e.stack)}try{const e=document.querySelectorAll("form.form, form.form-ajax"),t=document.querySelector(".modal"),c=document.querySelector(".modal__success"),r=document.querySelectorAll(".modal__item"),a=document.querySelector(".modal__auth-error");e.forEach((e=>{const o=e.querySelector(".btn");let s=e.getAttribute("data-success")?document.querySelector(".modal__success-"+e.getAttribute("data-success").trim()):"";e.addEventListener("submit",(l=>{l.preventDefault(),o.classList.add("disable");const n=new FormData(e);(async function(e,t){let c=await fetch(e,{method:"POST",body:t});return await c.text()})(e.action,n).then((e=>{o.classList.remove("disable"),t.classList.add("active"),r.forEach((e=>e.classList.remove("active"))),"auth-error"==e?a.classList.add("active"):"restart"==e?window.location.reload():s?s.classList.add("active"):c.classList.add("active"),document.querySelector("body").classList.add("fixed"),document.querySelector("html").classList.add("fixed")}))}))}))}catch(e){console.log(e.stack)}};window.addEventListener("DOMContentLoaded",(()=>{e('input[type="tel"]'),t(),(()=>{try{document.querySelectorAll(".slider").forEach((e=>{let t,c=e.querySelector(".slider-track"),r=e.querySelector(".slider-list"),a=e.querySelector(".slider-dots"),o=e.querySelectorAll(".slider-toggle"),s=e.querySelectorAll(".slide"),l=0,n=e.querySelector(".right"),i=n?n.querySelector(".counter"):"",d=e.querySelector(".left"),u=d?d.querySelector(".counter"):"",m=0,h=s.length,g=0,v=0,y=!1,L=0,f=0;if(a){a.innerHTML="";for(let e=0;e<h;e++)a.innerHTML+="<span></span>";t=a.querySelectorAll("span")}const S=()=>window.innerWidth<=576&&e.getAttribute("data-mob-vis")?+e.getAttribute("data-mob-vis"):window.innerWidth<=768&&e.getAttribute("data-stablet-vis")?+e.getAttribute("data-stablet-vis"):window.innerWidth<=992&&e.getAttribute("data-tablet-vis")?+e.getAttribute("data-tablet-vis"):window.innerWidth<=1400&&e.getAttribute("data-lap-vis")?+e.getAttribute("data-lap-vis"):window.innerWidth<2100&&e.getAttribute("data-pc-vis")?+e.getAttribute("data-pc-vis"):e.getAttribute("data-tv-vis")?+e.getAttribute("data-tv-vis"):1,q=()=>{g=-m*l,c.style.transform=`translateX(-${m*l}px)`,s.forEach((e=>e.classList.remove("active"))),s[m].classList.add("active"),i&&u&&(u.textContent=`${0===m?h:m}/${h}`,i.textContent=`${m+2>h?1:m+2}/${h}`),a&&(t.forEach((e=>e.classList.remove("active"))),t[m].classList.add("active"))},p=()=>{l=s[0].offsetWidth+ +window.getComputedStyle(s[0]).marginRight.replace("px","")},E=()=>-l*(h-S()),b=(e=150)=>{if(y){c.classList.remove("fast"),r.classList.remove("grabbing"),y=!1,g=v;let t=-Math.ceil(f/l);0===t&&(f<-e&&(t=1),f>e&&(t=-1)),m+=t,m<0&&(m=0),m+S()>=h&&(m=h-S()),q(),f=0,L=0}},_=e=>{y=!0,L=e},A=e=>{y&&(c.classList.add("fast"),r.classList.add("grabbing"),f=e-L,v=g+(e-L),v>0&&(v=0),v<E()&&(v=E()),c.style.transform=`translateX(${v}px)`)};s.forEach(((e,t)=>{e.classList.contains("active")&&(m=t+S()>=h?h-S():t)})),p(),q(),r.addEventListener("mousedown",(e=>_(e.clientX))),r.addEventListener("mousemove",(e=>A(e.clientX))),r.addEventListener("mouseup",(()=>b(150))),r.addEventListener("mouseleave",(()=>b(150))),r.addEventListener("touchstart",(e=>_(e.touches[0].clientX))),r.addEventListener("touchmove",(e=>A(e.touches[0].clientX))),r.addEventListener("touchend",(()=>b(50))),n&&n.addEventListener("click",(()=>{m+S()>=h?m=0:m++,q()})),d&&d.addEventListener("click",(()=>{m<=0?m=h-S():m--,q()})),a&&t.forEach(((e,t)=>{e.addEventListener("click",(()=>{m=t,q()}))})),o&&o.forEach((e=>{e.querySelectorAll("span").forEach(((e,t)=>{e.addEventListener("click",(()=>{m=t,q()}))}))})),window.addEventListener("resize",(()=>{p(),q()}))}))}catch(e){console.log(e.stack)}})(),(()=>{try{document.querySelectorAll(".single-catalog__left").forEach((e=>{let t=e.querySelector(".single-catalog__slider-track"),c=e.querySelector(".single-catalog__slider-list"),r=t.querySelectorAll("img"),a=e.querySelectorAll(".single-catalog__big img"),o=e.querySelector(".arrow-next"),s=e.querySelector(".arrow-prev"),l=0,n=0,i=0,d=r.length;const u=()=>{r.forEach((e=>e.classList.remove("active"))),r[i].classList.add("active"),a.forEach((e=>e.classList.remove("active"))),a[i].classList.add("active"),window.innerWidth<=768?t.style.transform=`translateX(-${i*l}px)`:t.style.transform=`translateY(-${i*n}px)`},m=()=>{i+1>=d?i=0:i++,u()},h=()=>{i<=0?i=d-1:i--,u()},g=()=>{l=r[0].offsetWidth+ +window.getComputedStyle(r[0]).marginRight.replace("px",""),n=r[0].offsetHeight+ +window.getComputedStyle(r[0]).marginBottom.replace("px","")};t.style.transition="transform 0.5s ease 0s",g();let v=0;c.addEventListener("touchstart",(e=>{window.innerWidth<=768&&(v=e.changedTouches[0].screenX)})),c.addEventListener("touchend",(e=>{window.innerWidth<=768&&(v-e.changedTouches[0].screenX>50?m():v-e.changedTouches[0].screenX<-50&&h())})),o&&o.addEventListener("click",m),s&&s.addEventListener("click",h),r.forEach(((e,t)=>{e.addEventListener("click",(()=>{i=t,u()}))})),window.addEventListener("resize",(()=>{g(),u()}))}))}catch(e){console.log(e.stack)}})(),c(),(()=>{try{const e=document.querySelectorAll(".filter-range-line input"),t=document.querySelectorAll(".filter-price .from-text, .filter-price .to-text"),c=document.querySelector(".filter-range-line .line");let r=0;const a=a=>{let o=+e[0].value,s=+e[1].value;s-o<r?"range-from"===a.target.className?e[0].value=s-r:e[1].value=o+r:(t[0].textContent=o,t[1].textContent=s,c.style.left=o/e[0].max*100+"%",c.style.right=100-s/e[1].max*100+"%")};a(),e.forEach((e=>{e.addEventListener("input",a)}))}catch(e){console.log(e.stack)}try{const e=document.querySelector(".catalog__list"),t=document.querySelector(".catalog__more"),c=document.querySelector(".catalog__rating");if(e&&t){let r=e.querySelectorAll(".catalog__list-item"),a=e.innerHTML,o=window.innerWidth<=576?8:9,s=0,l=r.length;const n=()=>{for(let e=s;e<l&&!(e>=s+o);e++)r[e]&&r[e].classList.remove("hide");s+=o,s>=l&&(t.style.display="none")};if(n(),t.addEventListener("click",n),c){const t=c.querySelector(".catalog__rating-name"),o=t.querySelector("span"),l=c.querySelector(".catalog__rating-list"),i=l.querySelectorAll("span"),d=(c="По умолчанию",i="default")=>{if(t.classList.remove("active"),l.classList.remove("active"),o.textContent=c,e.innerHTML="","default"!=i){let t=Array.from(r);"price-up"==i&&t.sort(((e,t)=>+e.getAttribute("data-price")-+t.getAttribute("data-price"))),"price-down"==i&&t.sort(((e,t)=>+t.getAttribute("data-price")-+e.getAttribute("data-price"))),"rating"==i&&t.sort(((e,t)=>+t.getAttribute("data-rating")-+e.getAttribute("data-rating"))),t.forEach((t=>{t.classList.add("hide"),e.innerHTML+=t.outerHTML}))}"default"==i&&(e.innerHTML=a),s=0,r=e.querySelectorAll(".catalog__list-item"),n()};i.forEach((e=>{e.addEventListener("click",(()=>{d(e.textContent.trim(),e.getAttribute("data-sort").trim())}))}))}}}catch(e){console.log(e.stack)}})(),(()=>{const e=e=>{let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},t=(e,t,c={})=>{(c={path:"/",...c}).expires instanceof Date&&(c.expires=c.expires.toUTCString());let r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in c){r+="; "+e;let t=c[e];!0!==t&&(r+="="+t)}document.cookie=r};try{const e=document.querySelector(".cart__content-side .btn"),c=document.querySelector(".cart__form"),r=document.querySelector(".cart__list"),a=document.querySelector(".modal"),o=document.querySelector(".modal__success"),s=document.querySelectorAll(".modal__item");c.addEventListener("submit",(e=>{e.preventDefault()})),e.addEventListener("click",(()=>{if(r.classList.contains("hide")){e.classList.add("disable");const r=new FormData(c);(async function(e,t){let c=await fetch(e,{method:"POST",body:t});return await c.text()})(c.action,r).then((c=>{e.classList.remove("disable"),a.classList.add("active"),s.forEach((e=>e.classList.remove("active"))),o.classList.add("active"),document.querySelector("body").classList.add("fixed"),document.querySelector("html").classList.add("fixed"),setTimeout((()=>{t("cart","",{"max-age":-1}),window.location.reload()}),2e3)}))}c.classList.remove("hide"),r.classList.add("hide")}))}catch(e){console.log(e.stack)}try{const e=document.querySelectorAll(".cart__list-row.cart-add-parent"),t=document.querySelector(".pre-price"),c=document.querySelector(".cut-price"),r=document.querySelector(".end-price"),a=document.querySelector(".over-price-item").querySelector(".over-price"),o=document.querySelectorAll(".cart__top-cut-list > span"),s=()=>{setTimeout((()=>{let s=0,l=0,n=0;e.forEach((e=>{let t=+e.querySelector(".counter .counter-result").textContent.trim(),c=+e.getAttribute("data-price")*t,r=+e.getAttribute("data-cut")*t;e.querySelector(".price-result-span").textContent=r,s+=c,l+=r})),n=l,o.forEach((e=>{let t=e.getAttribute("data-dir"),c=+e.getAttribute("data-price"),r=+e.getAttribute("data-cut");("to"==t&&c>l||"from"==t&&c<=l)&&(o.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),a.textContent=r,n=Math.round(l-r*(l/100)))})),t.textContent=s,r.textContent=n,c&&(c.textContent=s-l)}),200)};s(),e.forEach((e=>{const t=e.querySelector(".counter .counter-minus"),c=e.querySelector(".counter .counter-plus");t.addEventListener("click",s),c.addEventListener("click",s)}))}catch(e){console.log(e.stack)}try{const c=document.querySelectorAll(".cart-add-parent"),r=document.querySelectorAll(".header__cart");let a=e("cart")?JSON.parse(e("cart")):[];c.forEach((e=>{const c=e.querySelector(".cart-add"),o=e.querySelector(".cart-delete"),s=e.querySelector(".counter");let l=+e.getAttribute("data-id");const n=(c="")=>{let o=s?+s.querySelector(".counter-result").textContent.trim():1,n=[],i=0,d=!1;"delete"==c?(a.forEach((e=>{e[0]!=l&&(i+=e[1],n.push(e))})),e.remove()):"responsive"==c?a.forEach((e=>{e[0]==l&&(e[1]=o),i+=e[1],n.push(e)})):(a.forEach((e=>{e[0]==l&&(e[1]+=o,d=!0),i+=e[1],n.push(e)})),d||(n.push([l,o]),i+=o)),r.forEach((e=>{e.querySelector("span")?e.querySelector("span").textContent=i:e.innerHTML+="<span>"+i+"</span>",0==i&&e.querySelector("span").remove()})),t("cart",JSON.stringify(n),{"max-age":2678400})};s&&s.classList.contains("responsive")&&(s.querySelector(".counter-minus").addEventListener("click",(()=>{setTimeout((()=>{n("responsive")}),200)})),s.querySelector(".counter-plus").addEventListener("click",(()=>{setTimeout((()=>{n("responsive")}),200)}))),o&&o.addEventListener("click",(()=>n("delete"))),c&&c.addEventListener("click",n)}))}catch(e){console.log(e.stack)}try{const c=document.querySelectorAll(".wishlist-btn, .wish-delete"),r=document.querySelectorAll(".header__favorite");let a=e("favorite")?JSON.parse(e("favorite")):[];const o=e=>{let c=[],o=!1;a.forEach((t=>{t!=e?c.push(t):o=!0})),o||c.push(e),a=c,r.forEach((e=>{e.querySelector("span")?e.querySelector("span").textContent=a.length:e.innerHTML+="<span>"+a.length+"</span>",0==a.length&&e.querySelector("span").remove()})),t("favorite",JSON.stringify(c),{"max-age":2678400})};c.forEach((e=>{let t=+e.getAttribute("data-id").trim();-1==a.indexOf(t)||e.classList.contains("wish-delete")||e.classList.add("active"),e.addEventListener("click",(()=>{o(t),e.classList.contains("wish-delete")?e.closest(".wish-parent").remove():e.classList.toggle("active")}))}))}catch(e){console.log(e.stack)}})(),(()=>{try{const e=document.querySelectorAll(".body-click-content"),t=document.querySelectorAll(".body-click-target");document.body.addEventListener("click",(c=>{if(c.target.classList.contains("body-click-target")||c.target.classList.contains("body-click-close")){c.preventDefault();let r=c.target.getAttribute("data-content")?document.querySelector('.body-click-content[data-content="'+c.target.getAttribute("data-content")+'"]'):c.target.nextElementSibling?c.target.nextElementSibling:"";e.forEach((e=>r!=e&&e.classList.contains("global-hide")?e.classList.remove("active"):"")),t.forEach((e=>e.classList.contains("global-hide")&&e!=c.target?e.classList.remove("active"):"")),r.classList.contains("body-click-content")?r.classList.toggle("active"):c.target.parentElement.classList.remove("active"),!c.target.classList.contains("not-active")&&c.target.classList.toggle("active")}else c.target.closest(".body-click-content")||(e.forEach((e=>e.classList.contains("not-global")?"":e.classList.remove("active"))),t.forEach((e=>e.classList.contains("not-active")||e.classList.contains("not-global")?"":e.classList.remove("active"))))}))}catch(c){console.log(c.stack)}try{const r=document.querySelectorAll(".elem_animate"),a=document.querySelectorAll(".text_animate");function o(e){e.forEach((e=>{(window.innerWidth<=600?window.innerHeight/1.05:window.innerHeight/1.2)+window.scrollY>=e.getBoundingClientRect().y+window.scrollY&&e.classList.add("anim")}))}a.forEach((e=>{let t=e.textContent.trim(),c="",r=0;for(let e=0;e<t.length;e++)c+=`<i class="or" style="transition: 0.4s all ${r.toFixed(2)}s">${t[e]}</i>`,r+=.03;e.innerHTML=c})),o(r),o(a),window.addEventListener("scroll",(()=>{o(r),o(a)}))}catch(s){console.log(s.stack)}try{const l=document.querySelector(".modal"),n=document.querySelectorAll("[data-call-modal]"),i=document.querySelectorAll(".modal__item");n.forEach((e=>{e.getAttribute("data-call-modal")&&e.addEventListener("click",(t=>{t.preventDefault(),i.forEach((e=>e.classList.remove("active"))),l.classList.add("active"),l.querySelector('.modal__item[data-modal="'+e.getAttribute("data-call-modal")+'"]').classList.add("active"),document.querySelector("body").classList.add("fixed"),document.querySelector("html").classList.add("fixed")}))})),l.addEventListener("click",(e=>{(e.target==l||e.target.classList.contains("modal__close")||e.target.classList.contains("modal__hide"))&&(i.forEach((e=>e.classList.remove("active"))),l.classList.remove("active"),document.querySelector("body").classList.remove("fixed"),document.querySelector("html").classList.remove("fixed"))}))}catch(d){console.log(d.stack)}try{const u=document.querySelector(".header__burger"),m=document.querySelector(".header__mobile");u.addEventListener("click",(()=>{u.classList.toggle("active"),m.classList.toggle("active"),document.querySelector("body").classList.toggle("fixed"),document.querySelector("html").classList.toggle("fixed")}))}catch(h){console.log(h.stack)}try{document.querySelectorAll(".counter").forEach((e=>{const t=e.querySelector(".counter-minus"),c=e.querySelector(".counter-plus"),r=e.querySelector(".counter-result");let a=+r.textContent;const o=(e=0)=>{a+=e,a<1&&(a=1),r.textContent=a};t.addEventListener("click",(()=>o(-1))),c.addEventListener("click",(()=>o(1)))}))}catch(g){console.log(g.stack)}try{document.querySelectorAll(".showhide-field").forEach((e=>{const t=e.querySelector(".showhide-list"),c=e.querySelector(".showhide-more");if(t&&c){const r=t.querySelectorAll(".showhide-item");let a=e.getAttribute("data-vis")?+e.getAttribute("data-vis").trim():5,o=0,s=r.length;const l=()=>{for(let e=o;e<s&&!(e>=o+a);e++)r[e].classList.remove("hide");o+=a,o>=s&&(c.style.display="none")};l(),c.addEventListener("click",l)}}))}catch(v){console.log(v.stack)}})()}))})();